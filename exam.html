<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shivang Testing Agency | CBT Exam</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="exam.css">
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="header-left">
    <h2>Shivang Testing Agency</h2>
    <span>Excellence & Assessment</span>
  </div>

  <div class="header-center">
    Candidate : <b id="candName"></b> |
    Exam : <b>Class 10 Board</b> |
    Subject : <b id="subjectName"></b>
  </div>

<div class="timer" id="timer">01:00:00</div>
</div>

<!-- MAIN -->
<div class="main">

  <!-- QUESTION -->
  <div class="card">
    <div class="qno" id="qno">Question 1</div>
    <div class="question" id="questionText"></div>
    <div id="options"></div>

    <div class="actions">
      <button class="btn save" onclick="saveAndNext()">SAVE & NEXT</button>
      <button class="btn review" onclick="markForReview()">SAVE & MARK FOR REVIEW</button>
      <button class="btn next" onclick="markForReviewNext()">MARK FOR REVIEW & NEXT</button>
      <button class="btn clear" onclick="clearResponse()">CLEAR</button>
      <button class="btn submit" onclick="submitExam()">SUBMIT</button>
    </div>
  </div>

  <!-- PALETTE -->
  <div class="card">
    <div class="palette-title">Question Palette</div>
    <div class="legend">
      ðŸ”´ Not Visited | ðŸŸ  Not Answered | ðŸŸ¢ Answered | ðŸŸ£ Marked | ðŸŸ£ðŸŸ¢ Answered & Marked
    </div>
    <div class="palette" id="paletteGrid"></div>
  </div>

</div>

<!-- ðŸ”¥ FINAL SCRIPT LOADER -->
<script>
  // Candidate name
  document.getElementById("candName").innerText = "Riya";

  const subject = localStorage.getItem("selectedSubject"); // science/math/sst
  const set = localStorage.getItem("selectedSet");         // A/B/C

  const subjectMap = {
    science: "SCIENCE",
    math: "MATHEMATICS",
    sst: "SOCIAL SCIENCE"
  };

  document.getElementById("subjectName").innerText =
    subjectMap[subject] || "SUBJECT";

  // Build data file path
  const dataFile = `data/${subject}_set${set}.js`;

  // Load questions first
  const dataScript = document.createElement("script");
  dataScript.src = dataFile;

  dataScript.onload = () => {
    // Load exam logic AFTER questions exist
    const examScript = document.createElement("script");
    examScript.src = "exam.js";
    document.body.appendChild(examScript);
  };

  dataScript.onerror = () => {
    alert("Question file not found!");
  };

  document.body.appendChild(dataScript);
</script>

</body>
</html>
